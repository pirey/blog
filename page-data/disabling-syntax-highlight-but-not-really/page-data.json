{"componentChunkName":"component---src-templates-blog-post-js","path":"/disabling-syntax-highlight-but-not-really/","result":{"data":{"site":{"siteMetadata":{"title":"Yeri's Digital Note"}},"markdownRemark":{"id":"d1192f7a-ecf0-533a-b1be-9351e26cddbd","excerpt":"I have a beautiful vim setup. It suited my needs very well, everything was perfect. Until someday it can’t keep up with my typing speed. No, I’m not saying that…","html":"<p>I have a <a href=\"https://github.com/pirey/dotfiles\">beautiful vim setup</a>. It suited my needs very well, everything was perfect. Until someday it can’t keep up with my typing speed.</p>\n<p>No, I’m not saying that I’m the fastest typist in the world. What I mean by that is, my vim became really slow when I work on 1000 LOC or so.</p>\n<p>So I tried to disable and enable some of my plugins to figure out what caused the issue. But, before I came to this point, I always suspicious with the syntax highlighting feature in vim. This is not the first time that I came across this slow syntax highlight issue.</p>\n<p>Previously, I have done some research and found some workarounds.</p>\n<p>For example, I used this snippet to limit the syntax highlighting to only specified column.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token builtin\">syntax</span> sync minlines<span class=\"token operator\">=</span><span class=\"token number\">256</span>\n<span class=\"token builtin\">syntax</span> sync maxlines<span class=\"token operator\">=</span><span class=\"token number\">256</span>\n<span class=\"token keyword\">set</span> <span class=\"token builtin\">synmaxcol</span><span class=\"token operator\">=</span><span class=\"token number\">250</span></code></pre></div>\n<p>I have also tried to minimize some other burden for vim, like disabling the <code class=\"language-text\">cursorline</code>, and disabling <code class=\"language-text\">matchparen</code> plugin.</p>\n<p>Also I found someone mentioned that we can use <code class=\"language-text\">set regexpengine=1</code> to solve the issue, which is not, and my vim hangs when I opened a typescript project.</p>\n<p>All the solution above doesn’t give the kind of result I expected. Vim performance is still relatively the same.</p>\n<p>My conclusion (for now) is that either vim is slow (the syntax highlight) or it is my laptop that is too slow.</p>\n<p>Once I saw a <a href=\"https://www.youtube.com/watch?v=aHm36-na4-4\">talk by some dude</a> where he demonstrate some cool vim tricks and stuff. Then suddenly from <a href=\"https://youtu.be/aHm36-na4-4?t=620\">out of nowhere</a> he mentioned that he don’t like syntax colouring. I was like, <em>whut?</em> I mean, how can we write code and keep being sane without using syntax highlight? Furthermore, I even found <a href=\"https://dev.to/huytd/turning-off-the-syntax-highlighter-8af\">a compilation of articles</a> giving advice to disable syntax highlighting. I don’t get it. And I still don’t understand it untill now.</p>\n<p>Looking at my issue right now, I think I will give it a spin and disable syntax highlight. But I the other side, I still rely on the syntax highlighting. Its just too helpful to be entirely thrown away.</p>\n<p>So I came up the idea to create a custom function in vim to toggle syntax highlight. So I can keep using highlight when I’m editing simple file with relatively small content.</p>\n<p>The function is something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token keyword\">function</span><span class=\"token operator\">!</span> <span class=\"token function\">SynToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g:syntax_on'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">syntax</span> off\n    <span class=\"token keyword\">else</span>\n        <span class=\"token builtin\">syntax</span> enable\n    <span class=\"token keyword\">endif</span>\n<span class=\"token keyword\">endfunction</span></code></pre></div>\n<p>To make it easier for me to invoke the function, I created a command to call it:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">command<span class=\"token operator\">!</span> SynToggle <span class=\"token punctuation\">:</span><span class=\"token keyword\">call</span> <span class=\"token function\">SynToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>But the problem is, I use custom highlight rules in my setup, and when I toggle the highlighting that way, my custom highlight broke.</p>\n<p><img src=\"/blog/82a22ccf1c6af298545943ea6331bb1a/syntoggle-err.gif\" alt=\"Illust\" title=\"Syntax highlighting toggle error\"></p>\n<p>That is because vim reset the highlight rules everytime we turned on / off the syntax highlight.</p>\n<p>Luckily, I have my custom highlight setup separated on its own file, <code class=\"language-text\">highlight.vim</code>, so I can easily <code class=\"language-text\">source</code> it everytime I toggle the highlight. Like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token keyword\">function</span><span class=\"token operator\">!</span> <span class=\"token function\">SynToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g:syntax_on'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">syntax</span> off\n    <span class=\"token keyword\">else</span>\n        <span class=\"token builtin\">syntax</span> enable\n        <span class=\"token keyword\">source</span> my_custom_highlight<span class=\"token operator\">.</span><span class=\"token keyword\">vim</span>\n    <span class=\"token keyword\">endif</span>\n<span class=\"token keyword\">endfunction</span></code></pre></div>\n<p><img src=\"/blog/14e10ac039d8797b4a643ca64b931354/syntoggle-ok.gif\" alt=\"Illust\" title=\"Syntax highlighting toggle ok\"></p>\n<p>Nice.</p>","frontmatter":{"title":"Disabling syntax highlight, but not really","date":"June 23, 2019","description":null}}},"pageContext":{"slug":"/disabling-syntax-highlight-but-not-really/","previous":{"fields":{"slug":"/catch-multiple-exception-in-javascript-with-union-type/"},"frontmatter":{"title":"Catch multiple exception in javascript with union type"}},"next":{"fields":{"slug":"/init-your-dotfiles/"},"frontmatter":{"title":"Init your dotfiles"}}}},"staticQueryHashes":["1246554614","2841359383"]}